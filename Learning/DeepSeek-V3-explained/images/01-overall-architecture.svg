<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <defs>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38a169;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ed8936;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#dd6b20;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="pinkGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ed64a6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d53f8c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grayGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#a0aec0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#718096;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="600" fill="#f7fafc"/>
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#2d3748" text-anchor="middle">DeepSeek-V3 整体架构</text>
  <text x="450" y="65" font-family="Arial, sans-serif" font-size="14" fill="#718096" text-anchor="middle">671B 参数 | 37B 激活 | MoE + MLA + MTP</text>
  
  <!-- Input Layer -->
  <rect x="350" y="90" width="200" height="40" rx="8" fill="url(#grayGrad)" filter="url(#shadow)"/>
  <text x="450" y="115" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">输入 Embedding</text>
  
  <!-- Arrow down -->
  <path d="M450 130 L450 155 L440 145 M450 155 L460 145" stroke="#718096" stroke-width="2" fill="none"/>
  
  <!-- Transformer Block Container -->
  <rect x="50" y="165" width="800" height="350" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <text x="450" y="190" font-family="Arial, sans-serif" font-size="16" fill="#4a5568" text-anchor="middle" font-weight="bold">Transformer Block x 61 层</text>
  
  <!-- MLA Block -->
  <rect x="80" y="210" width="350" height="140" rx="10" fill="url(#blueGrad)" filter="url(#shadow)"/>
  <text x="255" y="240" font-family="Arial, sans-serif" font-size="16" fill="white" text-anchor="middle" font-weight="bold">Multi-head Latent Attention (MLA)</text>
  
  <!-- MLA Details -->
  <rect x="100" y="255" width="140" height="35" rx="6" fill="rgba(255,255,255,0.2)"/>
  <text x="170" y="278" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">KV 压缩</text>
  
  <rect x="250" y="255" width="160" height="35" rx="6" fill="rgba(255,255,255,0.2)"/>
  <text x="330" y="278" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">低秩联合压缩</text>
  
  <rect x="100" y="300" width="310" height="35" rx="6" fill="rgba(255,255,255,0.2)"/>
  <text x="255" y="323" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">KV Cache 减少 93% | 推理内存大幅降低</text>
  
  <!-- DeepSeekMoE Block -->
  <rect x="470" y="210" width="350" height="140" rx="10" fill="url(#greenGrad)" filter="url(#shadow)"/>
  <text x="645" y="240" font-family="Arial, sans-serif" font-size="16" fill="white" text-anchor="middle" font-weight="bold">DeepSeekMoE (FFN)</text>
  
  <!-- MoE Details -->
  <rect x="490" y="255" width="100" height="35" rx="6" fill="rgba(255,255,255,0.2)"/>
  <text x="540" y="278" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">共享专家 x1</text>
  
  <rect x="600" y="255" width="100" height="35" rx="6" fill="rgba(255,255,255,0.2)"/>
  <text x="650" y="278" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">路由专家 x256</text>
  
  <rect x="710" y="255" width="90" height="35" rx="6" fill="rgba(255,255,255,0.2)"/>
  <text x="755" y="278" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">激活 8 个</text>
  
  <rect x="490" y="300" width="310" height="35" rx="6" fill="rgba(255,255,255,0.2)"/>
  <text x="645" y="323" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">无辅助损失负载均衡 | 动态偏置调节</text>
  
  <!-- MTP Block -->
  <rect x="200" y="370" width="500" height="80" rx="10" fill="url(#orangeGrad)" filter="url(#shadow)"/>
  <text x="450" y="400" font-family="Arial, sans-serif" font-size="16" fill="white" text-anchor="middle" font-weight="bold">Multi-Token Prediction (MTP)</text>
  <text x="450" y="430" font-family="Arial, sans-serif" font-size="13" fill="rgba(255,255,255,0.9)" text-anchor="middle">预测后续多个 token | 提升数据效率 | 可用于 Speculative Decoding</text>
  
  <!-- FP8 Training Badge -->
  <rect x="80" y="470" width="150" height="35" rx="8" fill="url(#pinkGrad)" filter="url(#shadow)"/>
  <text x="155" y="493" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle" font-weight="bold">FP8 混合精度训练</text>
  
  <!-- DualPipe Badge -->
  <rect x="250" y="470" width="150" height="35" rx="8" fill="url(#pinkGrad)" filter="url(#shadow)"/>
  <text x="325" y="493" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle" font-weight="bold">DualPipe 流水线</text>
  
  <!-- Cost Badge -->
  <rect x="420" y="470" width="180" height="35" rx="8" fill="url(#pinkGrad)" filter="url(#shadow)"/>
  <text x="510" y="493" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle" font-weight="bold">2.788M GPU 小时</text>
  
  <!-- Data Badge -->
  <rect x="620" y="470" width="180" height="35" rx="8" fill="url(#pinkGrad)" filter="url(#shadow)"/>
  <text x="710" y="493" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle" font-weight="bold">14.8T Tokens 预训练</text>
  
  <!-- Output Layer -->
  <rect x="350" y="535" width="200" height="40" rx="8" fill="url(#grayGrad)" filter="url(#shadow)"/>
  <text x="450" y="560" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">输出 (LM Head)</text>
  
  <!-- Legend -->
  <rect x="60" y="545" width="12" height="12" rx="2" fill="url(#blueGrad)"/>
  <text x="78" y="556" font-family="Arial, sans-serif" font-size="11" fill="#4a5568">注意力</text>
  
  <rect x="130" y="545" width="12" height="12" rx="2" fill="url(#greenGrad)"/>
  <text x="148" y="556" font-family="Arial, sans-serif" font-size="11" fill="#4a5568">MoE FFN</text>
  
  <rect x="210" y="545" width="12" height="12" rx="2" fill="url(#orangeGrad)"/>
  <text x="228" y="556" font-family="Arial, sans-serif" font-size="11" fill="#4a5568">MTP</text>
  
  <rect x="270" y="545" width="12" height="12" rx="2" fill="url(#pinkGrad)"/>
  <text x="288" y="556" font-family="Arial, sans-serif" font-size="11" fill="#4a5568">工程优化</text>
</svg>