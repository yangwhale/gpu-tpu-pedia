<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <defs>
    <linearGradient id="redLine" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#fc8181;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e53e3e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenLine" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38a169;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="400" fill="#f7fafc"/>
  
  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2d3748" text-anchor="middle">训练稳定性对比: HC vs mHC (27B模型)</text>
  
  <!-- Chart 1: Loss Gap -->
  <g transform="translate(50, 60)">
    <text x="160" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#4a5568" text-anchor="middle">(a) 相对损失差距</text>
    
    <!-- Axes -->
    <line x1="40" y1="20" x2="40" y2="200" stroke="#4a5568" stroke-width="1.5"/>
    <line x1="40" y1="200" x2="320" y2="200" stroke="#4a5568" stroke-width="1.5"/>
    
    <!-- Y-axis labels -->
    <text x="35" y="35" font-family="Arial, sans-serif" font-size="9" fill="#718096" text-anchor="end">+0.015</text>
    <text x="35" y="110" font-family="Arial, sans-serif" font-size="9" fill="#718096" text-anchor="end">0</text>
    <text x="35" y="185" font-family="Arial, sans-serif" font-size="9" fill="#718096" text-anchor="end">-0.015</text>
    
    <!-- X-axis labels -->
    <text x="40" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">0</text>
    <text x="120" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">5k</text>
    <text x="180" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">10k</text>
    <text x="240" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">15k</text>
    <text x="300" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">20k</text>
    <text x="180" y="230" font-family="Arial, sans-serif" font-size="10" fill="#4a5568" text-anchor="middle">训练步数</text>
    
    <!-- Grid lines -->
    <line x1="40" y1="110" x2="320" y2="110" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="4,4"/>
    
    <!-- HC line (unstable with spike) -->
    <path d="M 40 110 
             L 60 105 L 80 108 L 100 103 L 120 106 L 140 100 L 160 95 
             L 170 60 L 175 35 L 180 55 L 185 75
             L 200 95 L 220 100 L 240 105 L 260 102 L 280 108 L 300 105 L 320 107" 
          stroke="#e53e3e" stroke-width="2.5" fill="none"/>
    
    <!-- Spike annotation -->
    <circle cx="175" cy="35" r="15" fill="none" stroke="#e53e3e" stroke-width="2" stroke-dasharray="4,4"/>
    <line x1="190" y1="35" x2="230" y2="25" stroke="#e53e3e" stroke-width="1"/>
    <text x="235" y="22" font-family="Arial, sans-serif" font-size="10" fill="#e53e3e">损失飙升!</text>
    <text x="235" y="34" font-family="Arial, sans-serif" font-size="9" fill="#e53e3e">(约12k步)</text>
    
    <!-- mHC line (stable, at baseline 0) -->
    <line x1="40" y1="110" x2="320" y2="110" stroke="#38a169" stroke-width="2.5"/>
    
    <!-- Legend -->
    <line x1="50" y1="260" x2="80" y2="260" stroke="#e53e3e" stroke-width="2.5"/>
    <text x="85" y="264" font-family="Arial, sans-serif" font-size="10" fill="#4a5568">HC (超连接)</text>
    
    <line x1="160" y1="260" x2="190" y2="260" stroke="#38a169" stroke-width="2.5"/>
    <text x="195" y="264" font-family="Arial, sans-serif" font-size="10" fill="#4a5568">mHC (基线)</text>
  </g>
  
  <!-- Chart 2: Gradient Norm -->
  <g transform="translate(420, 60)">
    <text x="160" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#4a5568" text-anchor="middle">(b) 梯度范数</text>
    
    <!-- Axes -->
    <line x1="40" y1="20" x2="40" y2="200" stroke="#4a5568" stroke-width="1.5"/>
    <line x1="40" y1="200" x2="320" y2="200" stroke="#4a5568" stroke-width="1.5"/>
    
    <!-- Y-axis labels -->
    <text x="35" y="35" font-family="Arial, sans-serif" font-size="9" fill="#718096" text-anchor="end">高</text>
    <text x="35" y="185" font-family="Arial, sans-serif" font-size="9" fill="#718096" text-anchor="end">低</text>
    
    <!-- X-axis labels -->
    <text x="40" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">0</text>
    <text x="120" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">5k</text>
    <text x="180" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">10k</text>
    <text x="240" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">15k</text>
    <text x="300" y="215" font-family="Arial, sans-serif" font-size="9" fill="#718096">20k</text>
    <text x="180" y="230" font-family="Arial, sans-serif" font-size="10" fill="#4a5568" text-anchor="middle">训练步数</text>
    
    <!-- HC line (unstable with spike) -->
    <path d="M 40 160 
             L 60 155 L 80 158 L 100 150 L 120 155 L 140 145 L 160 140 
             L 170 80 L 175 30 L 180 70 L 185 100
             L 200 140 L 220 145 L 240 150 L 260 148 L 280 155 L 300 150 L 320 152" 
          stroke="#e53e3e" stroke-width="2.5" fill="none"/>
    
    <!-- Spike annotation -->
    <circle cx="175" cy="30" r="15" fill="none" stroke="#e53e3e" stroke-width="2" stroke-dasharray="4,4"/>
    <line x1="190" y1="30" x2="230" y2="25" stroke="#e53e3e" stroke-width="1"/>
    <text x="235" y="22" font-family="Arial, sans-serif" font-size="10" fill="#e53e3e">梯度爆炸!</text>
    
    <!-- mHC line (stable) -->
    <path d="M 40 165 
             L 60 163 L 80 166 L 100 162 L 120 164 L 140 160 L 160 162 
             L 180 158 L 200 161 L 220 159 L 240 163 L 260 160 L 280 162 L 300 158 L 320 161" 
          stroke="#38a169" stroke-width="2.5" fill="none"/>
    
    <!-- Legend -->
    <line x1="50" y1="260" x2="80" y2="260" stroke="#e53e3e" stroke-width="2.5"/>
    <text x="85" y="264" font-family="Arial, sans-serif" font-size="10" fill="#4a5568">HC (不稳定)</text>
    
    <line x1="160" y1="260" x2="190" y2="260" stroke="#38a169" stroke-width="2.5"/>
    <text x="195" y="264" font-family="Arial, sans-serif" font-size="10" fill="#4a5568">mHC (稳定)</text>
  </g>
  
  <!-- Bottom explanation -->
  <g transform="translate(50, 340)">
    <rect x="0" y="0" width="700" height="50" rx="8" fill="#fed7d7" stroke="#e53e3e" stroke-width="1.5"/>
    <text x="15" y="20" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#c53030">HC 的问题:</text>
    <text x="15" y="38" font-family="Arial, sans-serif" font-size="10" fill="#4a5568">在约 12k 步时,累积的残差映射偏离恒等映射太远,导致信号放大倍数高达 3000 倍!</text>
    <text x="470" y="38" font-family="Arial, sans-serif" font-size="10" fill="#4a5568">这直接导致梯度爆炸和训练崩溃。</text>
  </g>
</svg>